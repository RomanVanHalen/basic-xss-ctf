<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Basic Reflected XSS Challenge</title>
  <style>
    body {
      background-color: #001f3f;
      color: white;
      font-family: monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
    }
    input, button {
      margin: 10px;
      padding: 10px;
      border-radius: 5px;
      border: none;
      font-size: 16px;
    }
    .output {
      margin-top: 20px;
      font-size: 20px;
    }
    .flag {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Reflected XSS</h1>
  <p>Enter your name:</p>
  <input type="text" id="nameInput" placeholder="Enter your name">
  <button onclick="processInput()">Submit</button>

  <div class="output" id="output"></div>

  <!-- Hidden flag inside HTML -->
  <div class="flag" id="hiddenFlag">flag{basic_xss_successful}</div>

  <script>
    function processInput() {
      const userInput = document.getElementById('nameInput').value;
      const outputDiv = document.getElementById('output');

      // Check if the input contains script tags
      if (userInput.includes('<script>') && userInput.includes('</script>')) {
        // Extract the code between the script tags
        const code = userInput.replace('<script>', '').replace('</script>', '');
        
        try {
          // Use eval to execute the injected code (XSS exploit)
          eval(code); // This runs revealFlag()
        } catch (e) {
          outputDiv.innerText = "Error executing script.";
        }
      } else {
        // Safe input, just display it
        outputDiv.innerHTML = "Hello " + userInput;
      }
    }

    function revealFlag() {
      // Make the hidden flag visible when the XSS is successful
      const hiddenFlag = document.getElementById('hiddenFlag');
      hiddenFlag.style.display = 'block';
      alert("Flag Revealed: " + hiddenFlag.innerText);
    }
  </script>
</body>
</html>
